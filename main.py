import logging
import asyncio
import os
import random
from aiogram import Bot, Dispatcher, types
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from aiogram.filters import Command
from aiogram.utils.keyboard import ReplyKeyboardBuilder
from dotenv import load_dotenv, find_dotenv

load_dotenv(find_dotenv())
TOKEN = os.getenv("TOKEN")

bot = Bot(token=TOKEN)
dp = Dispatcher()

logging.basicConfig(level=logging.INFO)

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å 12 –∑–Ω–∞–∫–∞–º–∏ –∑–æ–¥–∏–∞–∫–∞
zodiacs = [
    "‚ôà –û–≤–µ–Ω", "‚ôâ –¢–µ–ª–µ—Ü", "‚ôä –ë–ª–∏–∑–Ω–µ—Ü—ã", "‚ôã –†–∞–∫",
    "‚ôå –õ–µ–≤", "‚ôç –î–µ–≤–∞", "‚ôé –í–µ—Å—ã", "‚ôè –°–∫–æ—Ä–ø–∏–æ–Ω",
    "‚ôê –°—Ç—Ä–µ–ª–µ—Ü", "‚ôë –ö–æ–∑–µ—Ä–æ–≥", "‚ôí –í–æ–¥–æ–ª–µ–π", "‚ôì –†—ã–±—ã"
]

# –í–æ–∑–º–æ–∂–Ω—ã–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã
horoscopes = {
    "‚ôà –û–≤–µ–Ω": ["–°–µ–≥–æ–¥–Ω—è –≤–∞—à –¥–µ–Ω—å! –ë—É–¥—å—Ç–µ —Å–º–µ–ª–µ–µ!", "–ò–∑–±–µ–≥–∞–π—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –æ–Ω–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ—Ä—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ."],
    "‚ôâ –¢–µ–ª–µ—Ü": ["–û—Ç–ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏–π!", "–ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã —Å —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ —Å–µ–≥–æ–¥–Ω—è."],
    "‚ôä –ë–ª–∏–∑–Ω–µ—Ü—ã": ["–ù–µ –±–æ–π—Ç–µ—Å—å –ø—Ä–æ—è–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É.", "–°–µ–≥–æ–¥–Ω—è –≤–æ–∑–º–æ–∂–Ω—ã –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏."],
    "‚ôã –†–∞–∫": ["–ü—Ä–∏—Å–ª—É—à–∞–π—Ç–µ—Å—å –∫ –∏–Ω—Ç—É–∏—Ü–∏–∏, –æ–Ω–∞ –ø–æ–¥—Å–∫–∞–∂–µ—Ç –≤–µ—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.", "–õ—É—á—à–µ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –∏ –∑–∞–Ω—è—Ç—å—Å—è —Å–æ–±–æ–π."],
    "‚ôå –õ–µ–≤": ["–í—ã –≤ —Ü–µ–Ω—Ç—Ä–µ –≤–Ω–∏–º–∞–Ω–∏—è! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ —Å–µ–±–µ –Ω–∞ –ø–æ–ª—å–∑—É.", "–°–µ–≥–æ–¥–Ω—è —Å—Ç–æ–∏—Ç –∏–∑–±–µ–≥–∞—Ç—å —Å–ø–æ—Ä–æ–≤."],
    "‚ôç –î–µ–≤–∞": ["–í—Å–µ –±—É–¥–µ—Ç –∏–¥—Ç–∏ –ø–æ –ø–ª–∞–Ω—É, –µ—Å–ª–∏ –ø—Ä–æ—è–≤–∏—Ç–µ —Ç–µ—Ä–ø–µ–Ω–∏–µ.", "–î–µ–Ω—å —É–¥–∞—á–µ–Ω –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞."],
    "‚ôé –í–µ—Å—ã": ["–•–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –≤–∞–∂–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.", "–ü–æ—Ä–∞–¥—É–π—Ç–µ —Å–µ–±—è —á–µ–º-—Ç–æ –ø—Ä–∏—è—Ç–Ω—ã–º."],
    "‚ôè –°–∫–æ—Ä–ø–∏–æ–Ω": ["–í–æ–∑–º–æ–∂–Ω—ã –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã —Å—É–¥—å–±—ã.", "–ù–µ —Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å —Å –≤—ã–≤–æ–¥–∞–º–∏, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é."],
    "‚ôê –°—Ç—Ä–µ–ª–µ—Ü": ["–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏–ª–∏ –Ω–æ–≤—ã–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –ø—Ä–∏–Ω–µ—Å—É—Ç —Ä–∞–¥–æ—Å—Ç—å!", "–û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –æ–±—â–µ–Ω–∏—è –∏ –¥—Ä—É–∂–µ—Å–∫–∏—Ö –≤—Å—Ç—Ä–µ—á."],
    "‚ôë –ö–æ–∑–µ—Ä–æ–≥": ["–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç–µ, —ç—Ç–æ –ø—Ä–∏–Ω–µ—Å–µ—Ç –ø–ª–æ–¥—ã.", "–°–µ–≥–æ–¥–Ω—è –ª—É—á—à–µ –∏–∑–±–µ–≥–∞—Ç—å —Ä–∏—Å–∫–æ–≤."],
    "‚ôí –í–æ–¥–æ–ª–µ–π": ["–ë—É–¥—å—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã –∫ –Ω–æ–≤—ã–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º.", "–ò–Ω—Ç—É–∏—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ."],
    "‚ôì –†—ã–±—ã": ["–î–µ–Ω—å –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–µ–Ω –¥–ª—è —Ä–æ–º–∞–Ω—Ç–∏–∫–∏ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞.", "–°–µ–≥–æ–¥–Ω—è –≤–∞–∂–Ω–æ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Å–≤–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ."]
}

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
keyboard = ReplyKeyboardMarkup(
    keyboard=[[KeyboardButton(text=zodiac)] for zodiac in zodiacs],
    resize_keyboard=True
)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
@dp.message(Command("start"))
async def start(message: types.Message):
    await message.answer("–ü—Ä–∏–≤–µ—Ç! –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø:", reply_markup=keyboard)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –∑–Ω–∞–∫–∞
@dp.message()
async def zodiac_selected(message: types.Message):
    sign = message.text.strip()
    if sign in horoscopes:
        prediction = random.choice(horoscopes[sign])  # –ë–µ—Ä–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑
        await message.answer(f"üîÆ –ì–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è {sign}:\n\n{prediction}")
    else:
        await message.answer("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞.")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
async def main():
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())